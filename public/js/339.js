"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[339],{7887:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(821),n=["value"];const a={__name:"Input",props:["modelValue"],emits:["update:modelValue"],setup:function(e){var t=(0,o.ref)(null);return(0,o.onMounted)((function(){t.value.hasAttribute("autofocus")&&t.value.focus()})),function(r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("input",{class:"dark:bg-zinc-900 dark:text-white/90 border-gray-300 dark:border-white/30 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",value:e.modelValue,onInput:a[0]||(a[0]=function(e){return r.$emit("update:modelValue",e.target.value)}),ref_key:"input",ref:t},null,40,n)}}}},5339:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z});var o=r(821),n=(0,o.createElementVNode)("title",null,"\r\n            Roles\r\n        ",-1),a=(0,o.createElementVNode)("div",{class:"bg-white dark:bg-zinc-900 shadow"},[(0,o.createElementVNode)("div",{class:"max-w-screen-2xl mx-auto py-6 px-6 lg:px-8"},[(0,o.createElementVNode)("div",{class:"flex justify-between items-center"},[(0,o.createElementVNode)("h2",{class:"font-semibold text-xl text-theme-800 dark:text-white/90"}," Roles ")])])],-1),l={class:"py-8"},s={class:"max-w-screen-2xl mx-auto px-6 lg:px-8 flex flex-col space-y-4"},c=["onClick"],i={class:"p-6 bg-white hover:border-theme-900/50 dark:bg-zinc-900 border border-transparent rounded-lg group"},m={class:"flex flex-col"},d={class:"font-bold text-theme-800"},u={class:"font-normal"},f=(0,o.createElementVNode)("div",{class:"flex items-center space-x-2 opacity-70"},[(0,o.createElementVNode)("i",{class:"bx bx-info-circle text-xl"}),(0,o.createElementVNode)("span",null,"Click a role to assign a member")],-1),p={class:"relative bg-white dark:bg-zinc-900 min-w-max w-auto h-auto max-h-[80%] p-6 rounded-lg"},b={class:"mb-5"},h={class:"font-bold block"},v=(0,o.createElementVNode)("span",{class:"font-semibold block pb-3"},"Members",-1),y={class:"max-h-[40vh] overflow-y-auto overflow-x-hidden"},g={key:0,class:"text-center my-5 w-full"},k=[(0,o.createElementVNode)("i",{class:"bx bx-loader-alt text-3xl text-theme-800 animate-spin"},null,-1)],w={key:1},x=["onClick"],V={key:0,class:"fixed inset-0 z-40 bg-black/50 backdrop-blur-md"},E={class:"relative bg-white dark:bg-zinc-900 w-auto h-auto max-h-[80%] p-6 rounded-lg"},N=(0,o.createElementVNode)("span",{class:"font-bold text-lg block mb-2"},"Confirmation",-1),C={class:"font-normal text-sm"},M={class:"flex justify-end mt-6"},B=(0,o.createElementVNode)("button",{type:"submit",class:"mx-2 py-3 px-7 bg-theme-600 hover:bg-theme-700 active:bg-theme-900 text-white text-sm rounded-lg"}," Yes",-1),O={key:0,class:"fixed inset-0 z-40 bg-black/50 backdrop-blur-md"};var j=r(9038),S=r(7887),A=r(3493),z=r.n(A),D=r(9669),_=r.n(D);function P(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const L={data:function(){return{showAssignModal:!1,role:null,showConfirmationModal:!1,member:null,searchform:{search:this.filters.search},visibleMembers:"",loading:!1}},components:{Head:j.Fb,Link:j.rU,BreezeInput:S.Z},props:{roles:Object,filters:Object,members:Object},methods:{assignMemberModal:function(e){var t=this;this.visibleMembers||(this.loading=!0,_().get("/roles").then((function(e){t.visibleMembers=U(U({},e.data.members),{},{data:[].concat(P(t.visibleMembers),P(e.data.members))})})).finally((function(){return t.loading=!1}))),this.showAssignModal=!0,this.role=e,this.form.role=e.id},assignmentConfirmationModal:function(e){this.showAssignModal=!1,this.showConfirmationModal=!0,this.member=e,this.form.member_id=e.id}},setup:function(){return{form:(0,j.cI)({member_id:""})}},watch:{searchform:{deep:!0,handler:z()((function(){var e=this;_().get(route("roles.index"),{params:{search:this.searchform.search}}).then((function(t){e.visibleMembers=t.data.members}))}),150)}}};const Z=(0,r(3744).Z)(L,[["render",function(e,t,r,j,S,A){var z=this,D=(0,o.resolveComponent)("Head"),_=(0,o.resolveComponent)("BreezeInput");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(D,null,{default:(0,o.withCtx)((function(){return[n]})),_:1}),a,(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",s,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.roles,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"overflow-hidden shadow-sm rounded-lg cursor-pointer",onClick:function(t){return A.assignMemberModal(e)}},[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",m,[(0,o.createElementVNode)("span",d,(0,o.toDisplayString)(e.position),1),(0,o.createElementVNode)("span",u,(0,o.toDisplayString)(e.member?e.member.name:"Unassigned"),1)])])],8,c)})),256)),f])]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(o.Transition,{"enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 scale-75","enter-to-class":"opacity-100 scale-100","leave-active-class":"duration-200 ease-out","leave-from-class":"opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-75"},{default:(0,o.withCtx)((function(){return[S.showAssignModal?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"overflow-auto inset-0 fixed z-50 h-screen w-screen flex justify-center items-center",onClick:t[1]||(t[1]=(0,o.withModifiers)((function(e){return z.showAssignModal=!1}),["self"]))},[(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",b,[(0,o.createElementVNode)("span",h,(0,o.toDisplayString)(S.role.position),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(S.role.member?S.role.member.name+" (Current)":"Unassigned"),1)]),(0,o.createVNode)(_,{modelValue:S.searchform.search,"onUpdate:modelValue":t[0]||(t[0]=function(e){return S.searchform.search=e}),class:"block w-full mb-3",type:"text",placeholder:"Search..."},null,8,["modelValue"]),v,(0,o.createElementVNode)("div",y,[S.loading?((0,o.openBlock)(),(0,o.createElementBlock)("div",g,k)):(0,o.createCommentVNode)("",!0),S.loading?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",w,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(S.visibleMembers,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{onClick:function(t){return A.assignmentConfirmationModal(e)},class:"w-96 p-3 hover:bg-black/5 rounded-lg cursor-pointer"},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.name),1)],8,x)})),256))]))])])])):(0,o.createCommentVNode)("",!0)]})),_:1}),(0,o.createVNode)(o.Transition,{"enter-active-class":"duration-200 ease opacity-0","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease opacity-90","leave-from-class":"opacity-90","leave-to-class":"transform opacity-0",appear:""},{default:(0,o.withCtx)((function(){return[S.showAssignModal?((0,o.openBlock)(),(0,o.createElementBlock)("div",V)):(0,o.createCommentVNode)("",!0)]})),_:1})]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(o.Transition,{"enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 scale-75","enter-to-class":"opacity-100 scale-100","leave-active-class":"duration-200 ease-out","leave-from-class":"opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-75"},{default:(0,o.withCtx)((function(){return[S.showConfirmationModal?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"overflow-auto inset-0 fixed z-50 h-screen w-screen flex justify-center items-center",onClick:t[4]||(t[4]=(0,o.withModifiers)((function(e){return z.showConfirmationModal=!1}),["self"]))},[(0,o.createElementVNode)("div",E,[(0,o.createElementVNode)("div",null,[N,(0,o.createElementVNode)("span",C,"Assign "+(0,o.toDisplayString)(S.member.name)+" as "+(0,o.toDisplayString)(S.role.position)+"?",1)]),(0,o.createElementVNode)("form",{onSubmit:t[3]||(t[3]=(0,o.withModifiers)((function(t){return j.form.put(e.route("roles.update",S.role),{preserveState:!1,preserveScroll:!0})}),["prevent"]))},[(0,o.createElementVNode)("div",M,[(0,o.createElementVNode)("button",{class:"mx-2 text-sm hover:underline",type:"button",onClick:t[2]||(t[2]=function(e){return z.showConfirmationModal=!1})},"Cancel"),B])],32)])])):(0,o.createCommentVNode)("",!0)]})),_:1}),(0,o.createVNode)(o.Transition,{"enter-active-class":"duration-200 ease opacity-0","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease opacity-90","leave-from-class":"opacity-90","leave-to-class":"transform opacity-0",appear:""},{default:(0,o.withCtx)((function(){return[S.showConfirmationModal?((0,o.openBlock)(),(0,o.createElementBlock)("div",O)):(0,o.createCommentVNode)("",!0)]})),_:1})])],64)}]])}}]);